---
sidebar_position: 41
---

# u90 新知和技術 


## 設定欄位為外鍵
1. 外鍵為描述表格間的關係，而設定為外鍵的欄位值通常會是指向有關係的表格X且以表格X的主鍵為代表
2. 如何設定某欄位為外鍵，首先在欄位的設定區塊中添加：
  - allowNull: 設定該欄位的值允不允許空值，在這裏會設定不允許空值(對應值為false)，以此保證每一個紀錄都有對應的外鍵
  ```
  allowNull: false
  ```
  - references: 設定該欄位值參考於哪個表格的主鍵，可選擇不添加，但添加後資料庫系統會對其欄位做出限制和連動，以此提高資料查詢、操作的速度與一致性。
  ```
  // 設定參考哪個表格以及該表格下的哪個主鍵
  references: {
    // 設定對應某表格的model名稱，該model為ODM對應的model
    model: model1,
    // 指定對應某表格下的哪個主鍵作為該目前表格下的外鍵
    key: attribute
  }
  ```
3. 範例：在這裏替todos這資料表格增加名為userId這欄位，其欄位值的設定為不允許空值、型別為整數、參考於users資料表格中的id主鍵作為todos的外鍵，而外鍵名稱在todos中命名為userId。
```
await queryInterface.addColumn(
      'todos',
      'userId',
      {
        allowNull: false,
        type: Sequelize.INTEGER,
        references: {
          model: 'users',
          key: 'id'
        }
      })

```
