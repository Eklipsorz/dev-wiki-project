---
sidebar_position: 60
---

# u123-124 新知和技術  

```
heroku ps:scale web=1
```

https://stackoverflow.com/questions/30318369/can-someone-explain-heroku-psscale-web-1

Getting started
You can use Heroku Exec by running:
```
$ heroku ps:exec
```
Heroku Exec 是一個建立本地端與heroku dyno之間的TCP SSH隧道，在這個隧道裡，你可以傳送heroku許可的指令來對對應的dyno進行操作，在這個過程中會被SSH協定所保護著

ps              Client tools for Heroku Exec


Heroku Exec is a feature for creating secure TCP and SSH tunnels into a dyno. It allows for SSH sessions, port forwarding, remote debugging, and inspection with popular Java diagnostic tools.



什麼是 SSH Tunneling (Port Forwarding)？
Tunneling 指的是將網路上的 A、B 兩個端點用某種方式連接起來，形成一個「隧道」，讓兩端的通訊能夠穿透某些限制（例如防火牆），或是能將通訊內容加密避免洩漏。而 SSH Tunneling 就是指利用 SSH 協定來建立這個隧道，所以不但能加密你的通訊，如果中間設有防火牆擋掉某些特定 Port 的連線（例如 HTTP/HTTPS 的 80/443）而沒有擋下 SSH 的 Port 22，這個隧道便會讓防火牆認為是只是一般的 SSH 連線，進而放行，也就達到了「穿透防火牆」的效果。

另外，因為 SSH Tunneling 的目標是兩個端點上的 Port，而過程就像是把對 A 點上的某個 Port X 所傳送的資料轉送 （Forward）至 B 點上的 Port Y，所以 SSH Tunneling 又稱為 SSH Port Forwarding


https://devcenter.heroku.com/articles/exec

https://stackoverflow.com/questions/54386370/heroku-what-is-the-difference-between-heroku-psexec-and-heroku-run-bash


Today Heroku Exec is generally available allowing you to connect to a dyno via SSH. To connect to a dyno, simply run:
$ heroku ps:exec
Establishing credentials... done
Connecting to web.1 on ⬢ ns-pipeline-staging...
~ $ top
Unlike heroku run bash, which creates a one-off dyno, Exec makes an SSH connection directly to an existing dyno (e.g., web.2).
Exec also allows you to copy files off of a dyno, forward traffic on a local port to a dyno, and take advantage of common Java debugging tools.


heroku ps:exec -> 利用隧道建立直接面向於dyno的終端機
heroku ps:

ps:scale   -> 擴展/縮減使用的dyno數量
   scale dyno quantity up or down


scale dyno quantity up or down

USAGE
  $ heroku ps:scale

OPTIONS
  -a, --app=app        (required) app to run command against
  -r, --remote=remote  git remote of app to use

DESCRIPTION
  Appending a size (eg. web=2:Standard-2X) allows simultaneous scaling and resizing.

  Omitting any arguments will display the app's current dyno formation, in a
  format suitable for passing back into ps:scale.

EXAMPLES
  $ heroku ps:scale web=3:Standard-2X worker+1
  Scaling dynos... done, now running web at 3:Standard-2X, worker at 1:Standard-1X.

  $ heroku ps:scale




  web=3:Standard-2X worker=1:Standard-1X

  
Whenever you freshly deploy your app in heroku it starts up one dyno where the app runs. Just consider it as a server. This server cant handle large number of requests all at once.

So in order to handle all these bulk requests you may want to run multiple instances of your app i.e. multiple dyno using the spare resources available in heroku just like running multiple instances in tomcat for the same application using the command (within limits ofcourse):

```
heroku ps:scale web=<number_dynos_u_want>
```

Heroku does the load-balancing for you. Thus you are able to horizontally scale your app to handle more load. Hope this clears this concept!
  https://stackoverflow.com/questions/30318369/can-someone-explain-heroku-psscale-web-1


dynos 是 Heroku 的專有名詞，是他分配給你的資源單位，總之這行指令是把你的 app 放到一個執行中的 dynos 上面，意義類似「伺服器跑起來了」。