---
sidebar_position: 4
---

# U26 知識&技術

## passport.js
1. 一個提供各種登入策略(Strategies)來進行使用者驗證的第三方套件
2. 主要功用為：
  - 提供各種登入策略來進行使用者驗證
  - 將使用者資訊存放在server的session中

3. 驗證策略為如下：
  - 本地驗證：以伺服器所提供的帳號密碼來驗證使用者是否輸入正確
  - FB驗證
  - Google 驗證
  - 諸如此類

## passport.js 設定方式
1. 首先，passport會使用express-session所建立的session來進行使用者驗證，本身並不負責建立/管理session和定義cookie內容，所以會先載入express-session，接著設定其套件，設定完之後，再來設定passport本身套件的載入，會從middleware來著手，主要會是passport.initialize和passport.session，接著再來定義passport在這能夠使用的驗證策略(如本地驗證、FB驗證等)，然後定義著passport在express-session所建立的session上進行存放/存取，最後就是在路由器或者應用程式層級來調用passport的驗證功能，大致上分為幾個步驟：
  - 載入express-session並設定
  - 載入passport.js套件並引用passport.initalize和passport.session至express server來當middleware
  - 定義passport在這能夠使用的驗證策略
  - 定義passport在express-session所建立的session上進行存放/存取
  - 在路由器或者應用程式層級來調用passport的驗證功能，並指定何種驗證策略(本地驗證、FB驗證)


1.  首先，先做session本身的設定，會由express-session來定義每個session如何建立、存放在哪、定義使用者要存的cookie內容等等
```
const session = require('express-session')
app.use(session(options))
```

2. 設定passport.js本身的設定，