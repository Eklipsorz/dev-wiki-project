---
sidebar_position: 37
---

# u81 新知和技術 



## 索引 (indexes)
1. 是資料庫提供的一個屬性之一，加快對於資料庫的資料查詢速度
2. 若不使用索引，資料庫會從第一條紀錄開始比對，直到找到符合的值，最差會到O(N)，試想近似無限多的資料數，那麼最差的情況就是最後一筆才是真正是滿足使用者所需的紀錄
3. 索引會使用B Tree/B+Tree 實作，原理會是幫資料按照索引可能會有的值來排序，比如ABC，就以英文字母順序來排序，也可以搭配多個屬性來當索引
4. 索引類別：主鍵索引、唯一索引、普通索引、組合索引


## 索引的類別
* 主鍵索引：資料表常以一列或一組值作為主鍵，必須唯一且不能為空，通常主鍵會自動建立索引。
* 唯一索引：值必須唯一但允許空值，想要在限制唯一的欄位建立索引時可用。例如，針對 customer table 裡的 phone 欄位，我們就會用唯一索引來確定沒有重複的手機號去確保程式邏輯。
* 普通索引：沒有任何限制，用來加快搜尋速度。
* 組合索引：由兩個以上的欄位組成的索引，不能為空，查詢資料常同時用到某些欄位時使用，更進一步增加資料庫的效率。

## 使用索引需要注意的地方
1. 額外建立資料結構來儲存索引也是有代價的：當資料進行增刪修時也要重新計算索引，因此不是所有情況都能使用索引的。
2. 避免使用的時候：
  - 大量重複值(欄位)：會使得索引變得較無效果
  - 經常對欄位值進行CRUD的場景，每一次對欄位值進行CRUD都有可能會重新計算索引，除非欄位值本身就不是索引
  - 紀錄較為小量的表格：會使得索引變得較無效果

3. 常見索引失效的情境：
  - LIKE 語法用 % 開頭如 '%aaa' 無法進行比對，但 'aaa%' 就沒問題。
  - 由於用建立順序的方式來快速查詢資料，「非」的查詢如 <>、not in 等等就失效了。
  - 用 OR 連接非索引條件。


## 範例索引使用情境
1. 當資料有一定的量，同時重複性不高，就比較適合使用索引
```
請問下列何種狀況較適合使用索引？（單選）

二十幾列飲料菜單的價格欄位

三萬多位校友資訊的姓名欄位(正解)

全國學生資料表中的性別欄位
```
