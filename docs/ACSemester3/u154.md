---
sidebar_position: 79
---

# u154 新知和技術

## 定義資料模型：Comment



### 新增 Model

使用 Sequelize CLI 產生新的 Model：
```
$ npx sequelize model:generate --name Comment --attributes text:string,user_id:integer,restaurant_id:integer --underscored
```
系統會依指令自動分別產生一個 migration 的檔案 xxxxxxx-create-comment.js，另一個是 model 設定檔 models/comment.js，除了用 Eslint 修正格式外，還需要把 user_id 跟 restaurant_id 改成小駝峰式的命名：



### 設定 Model 關聯

Restaurant Model
```
      Restaurant.belongsToMany(models.User, {
        through: models.Comment,
        foreignKey: 'restaurantId'
      })

```

User Model
```
      User.belongsToMany(models.Restaurant, {
        through: models.Comment,
        foreignKey: 'userId'
      })
```

```
$ npx sequelize db:migrate
```
