---
sidebar_position: 34
---

# u77 新知和技術 

## SQL JOIN
1. JOIN是一種子句，會透過兩張表(分別為Table1和Table2)下各紀錄的某些屬性是否滿足條件來將紀錄組合在一起並構成暫時行的表格，過程並不會影響Table1和Table2所存下的紀錄。
2. 目的在於將原本資料表延伸成具有其他資料表的屬性來補充原本資料表的資訊。
3. 通常**條件會是表格Table1的紀錄A下的某屬性值X 與 表格Table2的紀錄B下的某屬性值Y是否為一樣**，若一樣的話，紀錄A和紀錄B會合併成新的一筆紀錄，隨後滿足條件的紀錄A和紀錄B會構成一系列的紀錄，這些紀錄將會存放在暫時性的表格
4. 在這裏每一筆在Table1的紀錄A以及每一筆Table2的紀錄B會是以范恩圖的集合看待，不論是哪一種表格，每筆紀錄都大致分為兩種：
  - 自己所擁有的某屬性值(X/Y)能與對方表格下的另一個某屬性值(Y/X)相符
  - 自己所擁有的屬某屬性值(X/Y)不能夠與對方表格下的另一個某屬性值(Y/X)相符
![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1642362081/blog/database/join/table1table2_vaw5ge.png)

而若考量兩個表格下的**自己所擁有的某屬性值(X/Y)能與對方表格下的另一個某屬性值(Y/X)相符**的話，那些能與對方的屬性值相符的紀錄們可以構成范恩圖的交集，也就是下圖中的Table3'
![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1642362419/blog/database/join/intersectionTables_fblo1j.png)

5. 在這裏的JOIN結果會根據比對方式而有所不同：
  - 以Table 1和Table 2以共同擁有相同屬性值的紀錄AB為前提來比對，例子：
  ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1642364480/blog/database/join/innerJoinSimpleExample_pwfktf.png)
  - 以Table 1的每筆紀錄A對Table 2的每筆紀錄B為前提進行比對
  ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1642364480/blog/database/join/rightJoinSimpleExample_g9svfl.png)
  - 以Table 2的每筆紀錄B對Table 1的每筆紀錄A為前提進行比對
  ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1642364480/blog/database/join/leftJoinSimpleExample_fu9oqi.png)
3. ，若兩筆各在Table1和Table2的紀錄所擁有的屬性值X是一樣，就會將這兩筆紀錄合併成一筆紀錄，而其餘被合併的紀錄透過這方式而產生，最後所產生的一系列合併後紀錄會構成一個暫時表格
4. Table 1 和 Table2 的所有紀錄中分為兩種
  - 與對方表格無法滿足某屬性X值是一樣的條件式
  - 與對方表格能夠

以Table1 和Table2 的
以Table1 所擁有的紀錄來進行 JOIN
以Table2 所擁有的紀錄來進行 JOIN


在這裡我們有4個方案(如下)透過合併來延伸原本資料表所具有的屬性，我們以兩個表格(table 1和table 2)作為範例，其中table1為目前所使用的表格：
- INNER JOIN：透過兩個表格間的欄位值(參考欄位值)是否一致來把table1所擁有的所有屬性和table2所擁有的所有屬性合併成一個擁有table1和table2的所有屬性之表格。
  ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1642352642/blog/database/join/innerjoin_wjl4ix.gif)

- LEFT JOIN：透過兩個表格間的欄位值(參考欄位值)是否一致來把table2所擁有的參考欄位值來與table1表格所有屬性合併成一個擁有table1所有屬性以及table2的參考欄位值之表格
  ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1642352642/blog/database/join/leftjoin_ksfioj.gif)
- RIGHT JOIN
  ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1642352642/blog/database/join/rightjoin_flewgf.gif)
- SELF JOIN
4. 在使用 JOIN 的時候，我們需要考慮到
  - 我要使用哪一種 JOIN？
  - JOIN 資料表跟資料表之間的參考點是什麼？(參考點為每一個要合併的表格所要比對的屬性，而比對就是比較是否一致並根據一致來合併新的紀錄)


## INNER JOIN
1.
```
CREATE TABLE `drinks` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(10) NOT NULL,
  `price` INT UNSIGNED NOT NULL,
  `cost` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `orders` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `drink_id` INT UNSIGNED NOT NULL,
  `customer_id` INT UNSIGNED NOT NULL,
  `quantity` INT UNSIGNED NOT NULL,
  `createAt` TEXT NOT NULL,
  PRIMARY KEY (`id`)
);
```

2.  


```
SELECT * FROM `orders`
JOIN `drinks`
ON `orders`.`drink_id` = `drinks`.`id`
```


## LEFT JOIN
1. 



2. 
```
SELECT * FROM `orders`
LEFT JOIN `drinks` 
ON `orders`.`drink_id` = `drinks`.`id`
```





## RIGHT JOIN

1. 


2. 

```
SELECT * FROM `orders`
RIGHT JOIN `drinks` 
ON `orders`.`drink_id` = `drinks`.`id`
```