---
sidebar_position: 62
---

# u127-131 新知和技術  


## A16: 使用者權限管理 (R01) 的前置知識
流程為：
 1. 從main分支切換至R01分支：在這裡由於R01分支未先建立，所以會使用checkout 的-b來先建立分支再切換。
 ```
  git checkout -b R01
 ```
 2. 將origin對應的遠端倉庫下的R01-test分支合併至目前本地端的R01分支：主要從R01-test獲取：
  - helpers/unit-test-helper.js：這是測試設計者的工具包
  - tests/R01.test.js ： 這是和 R01 作業對應的測試檔
 ```
  git merge origin/R01-test
 ```
  - 額外的middleware/auth.js修改：在這裏為了讓helpers目錄下的helper function構成一個名為helpers的物件，裡頭包含了目前這個程式模組所需要的helper function。
  ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1643564364/blog/deployment/ExportedContentImage_00-3_pr93kh.png)
 3. 於本地端的R01分支進行開發，等到開發完成並以執行下面測試程式來驗證其開發成效
 ```
  npm run test
 ```
 4. 等到所有驗證都合格之後，再向原開發者的專案發送pull request來觸發travis的CI/CD驗證
目的為：
  - 學習在另一個不影響他人開發的分支下進行開發以及合併

圖形流程：
![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1643563327/blog/deployment/%E8%87%AA%E5%8B%95%E5%8C%96%E6%B8%AC%E8%A9%A6_fugrcg.png)



### 補充：mock object
1. mock object 意指為仿製的對象，也就是行為或者外表很很近似於某項人事物X但卻不是真實的人事物X。在這裏mock會是形容詞的仿製的、假裝的
2. 引申至電腦科學中的物件導向程式設計，mock object是一個模擬某項物件X行為的模擬物件，該模擬方式會是以可控制的方式來模擬。
> In object-oriented programming, mock objects are simulated objects that mimic the behavior of real objects in controlled ways, most often as part of a software testing initiative. A programmer typically creates a mock object to test the behavior of some other object, in much the same way that a car designer uses a crash test dummy to simulate the dynamic behavior of a human in vehicle impacts. The technique is also applicable in generic programming.




### tests/R01.test.js 測試案例
1. R01.test.js分別有describe、context、it這三個關鍵字所組成的巢狀結果：
  - describe： 目前指示測試的作業是為何
  - context：則是告知測試作業的某項功能
  - it：則是定義著某項功能的規格定義
  - 巢狀結構為:
  ```
  describe: {
    context: {
      it: {

      }
    }
  }
  ```
2. 資料庫測試設計：考慮到應用程式與實際資料庫系統之間的連接可能會出現以下實際問題，為了更好著種於應用程式如何運用資料庫上的資料，會直接用一個假的資料來模擬已經從對應資料庫所獲取的資料，而非真實從資料庫獲取資料。
  - 是網路連線有問題嗎？
  - 是資料庫出了問題嗎？
  - 是種子資料不齊全嗎？

3. 測試檔目的：
  - 確保程式規格都符合標準(包含命名都要一樣、路由設計、相關處理)
  - 確定哪些地方是可以優化以及哪些地方是不可以優化，只得符合標準
  


### 補充： pull request
1. push: 對於資料或者資料庫的資料而言，當資訊被推入，代表你正在將資訊推入至系統或者說你正在將資訊更新至資料庫
2. pull: 對於資料或者資料庫的資料而言，當資訊被拉入，代表你正在從系統或者資料庫取得資訊
3. github本身儲存程式碼差異的資料庫，而資料就是程式碼之間的差異，push就是將程式碼之間的差異更新至github，而pull就是從github獲取對應的差異來更新目前怵妤的本地倉庫
4. 在向一名開發者X的專案fork至自己的專案下，以自己方式來修改該專案來將差異更新至開發者X的原專案下，但這樣的更新很容易因太容易更新對方的程式碼而造成困擾，甚至產生程式碼衝突，因此若自己fork過來的程式碼想要更新至原開發者X的專案下，必須向該原開發者X的專案發送pull request，來請求原開發者X能夠採用(獲取)你的程式碼差異更新至自己的專案
> A pull request is a method of submitting contributions to an open development project

5. pull request 是發出徵詢原開發者是否進行後續pull之請求，對於原開發者而言，採用我方的程式碼合併至他自己的專案下就是pull的行為




  我們在 GitHub 上串接的整合測試服務叫 Travis，一旦收到 pull request 就會自動執行測試，等於是在一個雲端環境去跑 npm run test。