---
sidebar_position: 9
---


# U32-33 知識&技術


## Template Engine
1. 中譯為範本引擎或者模板引擎，引擎本身
2. Template engine 以一個特定模板和搭配該引擎所提供的語法、概念、功能來讓資料與模板結合在一起，合併內容會存放一個檔案，而這份檔案被稱之為Template file，最後會轉換成另一份文件或者模板。
3. 在網頁的話，主會將網頁中的程式碼區分為業務邏輯區塊或者使用者介面這兩個區塊，其中使用者介面這區塊會被當作不會變動的模板來看待，並透過引擎特有的語法、概念、功能來獲取業務邏輯區塊的處理結果與模板結合在一起，接著在將合併內容轉換成HTML檔案。
4. 若伺服器端有這引擎的話，當客戶端請求要這份檔案時，原本伺服器是直接回傳代表模板的HTML檔案，現在代表模板的檔案會是以Template engine所構成的Template file，所以會先經過伺服器進行轉換，最後轉換成HTML回傳給客戶端自行渲染。

5. 有兩個主流引擎：
 - PUG：是 Express 預設、並有許多人使用的樣板引擎，省略了原本 HTML 中角括弧的用法，並改變了原本的架構，PUG 雖然視覺上非常簡潔，但是和原本的 HTML 結構完全不同 
 - Handlebars：基本結構和原生的 HTML 一樣

 6. 有三大好處：
  - 程式碼分離出業務邏輯和介面這兩塊
  - 分離出靜態資料（模板）和動態資料
  - 讓程式碼更好地被重複使用

## Handlebars
1. 為主流的模板引擎之一
2. 安裝方式為：
```
npm install --save express-handlebars
```
3. 使用之前會先設定express的模板引擎為handlebars，會以下面方式來設定，設定之後便會以handlebars來當渲染引擎，當碰上副檔名為handlebars，就會被handlebars這引擎給轉換或者進行特定處理，其中第二段的defaultLayout是設定預設模板是什麼檔案，副檔名為handlebars。
```
const expbars = require('express-handlebars')
app.engine('handlebars', expbars({defaultLayout: 'main'}))
app.set('view engine', 'handlebars')
```




## app.engine
1. 設定一個模板引擎名來負責轉換特定副檔名的檔案為另一個特定檔案
2. 形式為以下，ext為一個檔案的副檔案名，而callback則是代表實現模板引擎主要功能的函式物件，它負責將指定副檔名ext轉換為特定檔案，而特定檔案通常會是html檔案
```
app.engine(ext, callback)
```


## app.set
1. 設定一組key-value pairs當作系統設定變數或者修改已存在的系統設定變數(該變數也是key-value pairs形式)
2. 形式為以下，賦予value這個值給一個名為name的變數
```
app.set(name, value)
```
3. 設定已存在的系統設定變數例子：
 - app.set('view engine', 'handlebars') 中的view engine是指負責渲染的引擎，在這裏是設定handlebars是負責渲染的引擎，當設定完之後，便能夠讓express去使用handlebars這引擎
