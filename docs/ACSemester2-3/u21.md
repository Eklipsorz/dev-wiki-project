---
sidebar_position: 5
---

# U21 知識&技術

## 關注點分離
1. 全名為Separation Of Concerns(SOC)，是一種軟體設計原則
2. 關注點指的是電腦程式的開發目的、開發電腦程式所需要關注的地方，這些會是影響著程式碼的因素，若單一程式所擁有的關注點越繁複且複雜的話，該程式會越難維護以及管理。
3. 關注點分離的原則是將原本關注點較為繁複的電腦程式分隔為不同部分的小程式，每一個部分都會從原本關注點分離出不同且獨立的關注點，然後再由一些特定的方法來讓這些分離出來的小程式相互合作來達到原本分離前的電腦程式所要做的事情，從而讓維護難度變得更簡單更好管理。
4. 在實作上會將應用程式分拆成不同的功能層(layer)或者不同的程式碼(module)模組，每個功能層或者模組都具有不同的關注焦點，彼此分工合作


## 三層架構
1. 全名3-tier architecture，一種將程式碼切分成三種層級的軟體架構，簡而言之，將程式碼根據某種性質來分成三種
2. 通常會將程式碼區分為呈現層、業務邏輯層、資料訪問層：
 - 呈現層(Presentation layer)：主要負責呈現使用者介面給使用者並賦予使用者能夠和介面上的元件進行互動。
 - 業務邏輯層(Business Logic Layer)：主要負責實現某些業務所需要完成的流程、標準以及將呈現層的介面上互動與自身層級功能進行綁定，當使用者對介面上的元件進行互動，其元件會因為綁定而發送請求以及所需資料，這代表要求著實現對應業務(該互動所需要提供的服務)以及所需資料，這時會經由此層來接收並決定如何處理業務，處理過程中會利用資料存取層來請求回傳使用者所需資料給業務邏輯層來做後續對應業務的處理完便會回傳結果給呈現層，由它呈現最後結果給使用者看
 - 資料訪問層(Data access layer)：主要負責資料(庫)管理的層次，同時也只有這層能夠存取資料庫。

 ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1634048134/blog/SE/3-tier-arch_qpiq53.png)

3. 一般來說，軟體架構只會有介面和介面互動和業務邏輯這兩類，只是因為某些軟體需要著一個可以集中操作/存取資料庫的程式碼或者模組來保證資料能夠被安全地存取以及重複使用，而從業務邏輯分離出另一個，這個正是資料訪問，所以實際上，第一類為代表介面和介面互動的呈現層，第二類為代表業務邏輯的業務邏輯層和資料存取層，在這裏的業務邏輯層和資料存取層都隸屬于業務邏輯，並且由業務邏輯層去觸發資料存取層的行為並藉此獲取資料庫的資料。

![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1634049406/blog/SE/2-tier-simple-arch_xgicv5.png)

4. 附註：這裡所提到的資料都是長期保存在資料庫且具有意義的資料
## 業務邏輯
1. 全名為 Business Logic 或者 Domain Logic，指的是在軟體產品開發上，為了實現軟體業務(所需要提供的軟體服務)而必須完成的流程、標準或者在軟體產品開發的某個領域上實現軟體業務(所需要提供的軟體服務)所需要完成的流程、標準
2. 名詞解釋：
  - 業務(Business)是指出售並提供服務的行為或者事件，在這裡指的是一個實體單元(entity)向另一個實體單元(entity)所提供的服務。
  - 領域(Domain)是指著某個事物所控制/包含的範圍，在這裡指的是軟體開發在某些方面上的業務邏輯，比如說軟體開發在銀行業領域中的業務邏輯。
  - 邏輯(Logic)是指根據已知資訊推出合理的結論、規律、規則、標準、流程
  - 這兩個字合起來就是一個實體單元(entity)為了向另一個實體單元(entity)提供服務而推論出一些應該要完成的規則和流程。拿家規來當例子來說，你為了要向客人(提供禮貌服務)表達禮貌而站起來向客人自我介紹(流程)、你為了向家人(提供讓人安心的服務)表達一切都安心而對家人說晚安(流程)
3. 業務邏輯包含了四個部分：
  - 領域實體(Domain Entity)：領域內有哪些實體物件，該實體可以用名詞來形容，必須擁有著行為和屬性。例如，銀行業領域內會有帳戶、支票、營業員、ATM等實體物件，每個都具備著屬性和行為。
  - 業務規則(Business Rules)：對於領域內的 "運作方面上"，向領域實體所附加的規則和條件 或者 賦予運作規則給領域內每個實體物件，而每個實體物件會遵從這些規則上運行，也就是說定義實體物件需要完成的動作和必須要滿足的條件或者規則，例如，ATM這實體物件若需要從帳號A轉帳給帳號B，必須滿足"從帳號A扣款，接著再利用扣款的數目增加至帳號B" 這規則。(實體物件擁有物件上的行為，但行為只是表明它所能夠做的事情，而業務規則則定義實體在這個領域必須要做的事情以及規則。)
  - 完整性驗證(Validation)：附加至領域內的實體物件和業務規則的額外強制性條件來從他們本質上保證正確性或者如預期結果一樣，比如帳號密碼不能為空，身分證號碼必須按照格式來填寫
  - 業務流程及工作流(Business Processes and Workflows)：定義在領域內該如何觸發這些實體物件能夠運行以及如何觸發這些領域實體去相互著協調和合作。



  ## 參考資料
  1. [業務邏輯詳解](https://codertw.com/程式語言/406236/)
  2. [什么是业务逻辑？](https://zhuanlan.zhihu.com/p/200698366)
  3. [關於軟件中“業務邏輯”的詳解](https://www.twblogs.net/a/5eefab4933cbe858769e7366)
  4. [What really is the "business logic"?](https://softwareengineering.stackexchange.com/questions/234251/what-really-is-the-business-logic)




## MVC 

1. 設計目的：將原本關注點較為繁複且複雜的程式碼分離出三塊模組，每個模組的關注點都會是從原本關注點分離出不同且獨立的關注點，進而增加可維護性以及控管
2. MVC是什麼：
 - 3-tier 架構的應用例子。
 - 將應用程式切分成資料(庫)管理的Model、渲染視覺畫面的View、負責接收使用者的請求、調度Model和View來達成請求，並回傳結果給使用者的Controller。
 - 然而實際上來說，Model本身可以根據業務邏輯區分成業務邏輯層、資料存取層業務邏輯層是負責實現提供軟體功能並完成功能提供所需要具備的標準和規則，而資料存取層就是單純負責管理/存取資料庫的層級，順序上，一定是由業務邏輯層先執行，再由它來決定是否使用資料存取層。
 ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1634135369/blog/SE/insideModel_dxytya.png)
3. 各層例子：
 - Model 是包含了邏輯和呈現部分，例子上會是電商網站中的會員購物有九折、訂單超過一定的金額免運費、檢查登入帳號的類型，並依此開放不同權限 以及 社交網站中的判斷使用者彼此之間的友好程度，其中會員折扣和尋找好友會分別有訂單超過一定的金額免運費、判斷使用者彼此之間的友好程度這些標準來完成才能提供服務。
 - View 就是畫面本身，在網頁上則是以當作模板的HTML、CSS、JS檔作為表示
 - Controller 是負責接收使用者在介面上元件發出的請求、並調度Model和View來處理請求並回傳結果給使用者，由於本身就必須先於Model和View來攔截使用者發出的請求，所以Controller也會包含著負責篩選使用者請求並轉發至適合的模組，而這功能又是路由系統所提供，實際上可以是如下圖，但也可以從Controller分離出路由系統出來。

 ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1634136022/blog/SE/insideController_pzbylh.png)

