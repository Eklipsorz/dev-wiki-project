---
sidebar_position: 1
---

# 前後分離與 Web API 

## Server Side Rendering
由伺服器一端負責生成客戶端可直接以視覺呈現的檔案，每一次客戶端向伺服器發送請求時，伺服器都會根據請求內容來將資料與模板網頁檔案做結合並轉換成**客戶端可直接以視覺呈現的檔案**，最後由伺服器將結果檔案回傳給客戶端
>  rendering a client-side or universal app to HTML on the server.
簡述流程：
1. 瀏覽器針對特定網址送出請求
2. 路由器解析請求後，轉接給對應的 controller
3. controller 按照要求，透過 model 拿資料
4. controller 拿到資料後，呼叫 view template，並嵌入資料
5. 把「有資料的 template」轉換成瀏覽器可直接呈現的形式並回傳給瀏覽器
6. 瀏覽器接收檔案並以視覺形式來呈現其畫面。
![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1633596645/blog/network/ClientAndServer/MVCModel_dgvnhm.png)

這技術的優點：
  - 對客戶端(瀏覽器)要求較低：由於客戶端一拿到手就可以直接呈現，不需要花太多效能成本來將檔案轉換成畫面
這技術的缺點：
  - 使用者體驗較差：由於只要客戶端一發送請求，無論請求內容大小以要啥，伺服器都直接拿完整網頁傳遞至客戶端，而不是只拿到請求的變更內容。
  - 伺服器的效能消耗較大：由於網頁的大部分所需要的計算都會在伺服器上
  - 前後端程式碼較難維護：由於程式碼會由於前後端皆於後端實現，所以容易混雜在一起而導致難以維護

## Client Side Rendering: AJAX + API 溝通資料
每一份網頁X會讓客戶端向伺服器發送單次API請求，而伺服器回傳單次資料，而該資料會有該網頁X會需要渲染的資料，

## Client Side Rendering: 分離狀態：前端模組化

一份網頁X的每個元件都綁定著對應API網址，使得客戶端會同時向伺服器發送不同的API請求，而伺服器收到之後就按照API種類來回傳資料給他們，並由客戶端的前端框架來將資料組裝成可呈現的網頁，在這樣子的結構，當網頁上的有個元件Y需要更動的時候，框架會固定剩餘元件的內容，而只向伺服器發送元件Y對應的API請求來索要並更動元件Y的樣子


相對於AJAX + API溝通資料來說，
每個從客戶端發送的API請求變得相當明確，並且發送API請求次數變得更多


## 補充知識：Render && Rendering
1. Render的原意為使處於某個狀態的某人事物轉變成另一個狀態的人事物，Rendering則是強調著轉變的行為
> to cause someone or something to be in a particular state
2. website rendering：則是指網頁本身的轉換行為，可根據伺服器或者客戶端而有所不同：  
  - Server Rendering：將模板檔案搭配資料來生成客戶端可直接呈現的檔案形式，通常為HTML、CSS、JS
  - Client Rendering：將HTML、CSS、JS以視覺形式來呈現在客戶端上。