---
sidebar_position: 1
---

# JS小簡史

## jQuery
1. 背景為 **瀏覽器對ECMAScript所描述的JS具有不同的實現方式和相容問題**，往往代表同一個功能的程式碼會因為瀏覽器的不同而寫成不同版本的程式碼
2. 提出目的為 **解決不同瀏覽器對於JS的相容問題**
3. 如何達成目的：
  - 將不同瀏覽器下的功能實現程式碼以功能性整合成統一的函式語法來允許使用者透過呼叫，就能使用對應功能，且只要呼叫該函式，該函式會依據目前所處的瀏覽器是為何而對應不同版本下的功能實現程式碼執行。
4. 它是什麼：
  - 一個供人呼叫使用的函式庫


## JS
1. 背景為 **網景公司與微軟之間的瀏覽器大戰**
2. 提出目的為 **網景為了在大戰中強佔開發者和使用者的市場，當時的網頁只能夠讓使用者瀏覽且不能夠互動，而開發出一套易於開發且能夠允許使用者與網頁進行互動的語言**
3. 如何達成目的：
  - 易於開發：以直譯式、動態語言來實現強佔開發者
  - 允許使用者與網頁進行互動的語言：以能夠藉由網頁元件來實現event-driven概念來讓使用者更方便使用網頁
4. 細節：
  - 在沒有SPA、AJAX概念下，由於網頁開發上會以伺服器渲染出對應請求的網頁至使用者，由於只要客戶端一發送請求，無論請求內容大小以要啥，伺服器都直接拿完整網頁傳遞至客戶端，而不是只拿到請求的變更內容。
  - 瀏覽器大戰落幕之後，就有人提出ECMAScript標準來定義JS本身，但瀏覽器本身並不會對這標準進行全面性的支援，所以都會有相容問題。



## AJAX
1. AJAX 是 Asynchronous JavaScript and XML 的縮寫，其中XML是代表著資料本身的形式，當時出身背景是以XML為主，現如今不限於XML，也開放JSON格式使用。
2. 一種使用既有技術和架構(HTML、XHTML、CSS、JS、DOM)的新開發方法或者技術
3. 目的在於 **允許瀏覽器能根據使用者對於網頁的互動或者請求以非同步形式索要對應資料(XML)來更新網頁上的指定內容/元件**
4. 應用於網頁前端與後端伺服器溝通


## MPA
1. MPA 是 Multi-Page Application 的縮寫，是一種網頁開發的概念。
2. 主要是:
  - 將伺服器所提供的網站視為應用程式(Application)
  - 該應用程式是以多頁的形式來提供功能和畫面至客戶端，換言之，每一個功能或者畫面皆以一個(瀏覽器所給予的)獨立頁面來呈現給客戶端，如同下面程式碼那樣，當要瀏覽首頁，就必須讀取index.html來得到一個獨立頁面；當要瀏覽關於我們，就必須讀取pages/about.html
```
<ul>
  <li><a href="index.html">首頁</a></li>
  <li><a href="pages/about.html">關於我們</a></li>
  <li><a href="pages/news.html">最新消息</a></li>
  <li><a href="pages/products.html">所有產品</a></li>
  <li><a href="pages/contact.html">聯絡我們</a></li>
</ul>
```
3. 實作方法為：
  - 通常會是以Server Side Rendering(SSR)技術來實現其概念
  - 替每一個功能或者畫面綁定對應要給予瀏覽器渲染的網頁頁面，其頁面通常會有事先定義好的程式碼或者是以靜態內容呈現
4. 優點：
  - 頁面的獨立性：每一個畫面、功能皆不會影響彼此，只需轉換對應頁面就能瀏覽對應頁面或者功能
  - 新內容可擴充性高：當需要添加新內容(畫面、功能)時，可以直接以一個獨立頁面來呈現；在SPA上，由於效能問題而不建議/不允許擴充太多套件，因為每一個新內容都會塞入同一個頁面，這使得整個專案下內容的初始載入速度會隨著內容數越多而越來越慢，而且還必須額外判斷每個內容的種類不同。
  - SEO較好：由於瀏覽器搜尋引擎都定義執行特定程式去讀取每個網站的網頁資料來建立特定關鍵字以及評分，評分越高就容易被搜尋，而一般來說只會讀取靜態內容，而MPA通常是用靜態內容來實作，因此相對來說，容易得到不錯的SEO效果。不過此外，由於近期由於搜尋引擎(如chrome)開始支援針對SPA進行合適的SEO評分流程，所以這項優點可能不會是最主要的優點。
5. 缺點：
  - 使用者體驗較差：由於每一次要讀取畫面/使用特定功能都需要轉換頁面，且即使使用者發送規模較小的請求也會刷新整個頁面
  - 對於請求而言，效能較差：無論請求規模多大，對應請求都會讓伺服器重新傳遞完整的對應網頁資料至客戶端，讓客戶端重新渲染畫面。
  - 前後端耦合問題(相依問題)：由於是以SSR技術來實現其概念，SSR本身會根據請求將所需的資料和模板網頁合併並轉換至客戶端，其中的模板網頁和資料之間的合併相關會由前後端一起進行，導致很容易因為修改其中一段程式碼而進而影響兩端的結果。
  - 不易維護和更新：由於MPA是主打每一個畫面和功能都各用一個獨立頁面來呈現，所以維護起來會以頁面為單位來進行維護，並且當專案越大，所需要維護的頁面數就跟著增多。
6. 適用場景為如下：
  - 適用於涉及龐大數量的服務或產品的場景，如電商系統 
  - 需要讓搜尋引擎更好找到網頁或者過於依賴SEO的場景
7. 參考文獻：
  - [Pros and Cons Between Single Page and Multi-Page Apps](https://andrewly.medium.com/pros-and-cons-between-single-page-and-multi-page-apps-8f4b26acd9c9)
  - [單頁面應用程式（SPA）vs 多頁面應用程式（MPA）：選擇哪個用於web開發](https://www.gushiciku.cn/pl/pGDD/zh-tw) 

## SPA
1. SPA 是 Single Page Application 的縮寫，是一種網頁開發的概念
2. 主要是：
  - 將伺服器所提供的網站視為應用程式(Application)
  - 該應用程式是將功能和畫面集中在單一頁面，換言之，每一個功能或者畫面皆會在同一個頁面下來呈現給客戶端。
3. 實作方法為：
  - 通常會是以Client Side Rendering(CSR)技術 或者 以SSR先產生對應請求的View，然後之後的畫面和功能皆用CSR來取得
  - 在一個單一頁面上綁定對應特定功能或者畫面的JavaScript，由執行該JavaScript來在該頁面上呈現對應結果，其頁面通常不會事先定義好，必須經由使用者的互動來產生對應畫面或者功能
  - 在SPA中，原本對應功能或者畫面的頁面會是該架構的狀態(state)
4. 優點：
  - 對於請求而言，效能較好：相對於MPA而言，SPA上的大多數資源一旦完成一開始載入，後續只需要根據使用者的互動請求來變動同一個頁面上的部分內容，而非像MPA那樣，每一次請求都會變動同一個頁面上的所有內容
  - 前後端明確明確劃分：由於SPA是以CSR技術為主，網頁的畫面可由客戶端透過JS來向伺服器索要資源來渲染View和功能，所以進而讓伺服器端可完全切分出獨立的一塊以提供API資源為主的後端來開發，而前端則是可透過另外切分成獨立主機來幫助客戶端獲取或者由後端伺服器的不同程式模組來索要，整體而言，缺少資料和模板網頁合併，就可以做到前後分離，進而增加SOP的程度
  - 使用者體驗較好：由於SPA限定所有功能和畫面至一個單一頁面上，所以不會有跳轉頁面的需求來獲得對應功能或者畫面，只需要透過互動發送請求就即可更動同一頁面上的指定內容或者獲取功能。

5. 缺點：
  - SEO較差：一般來說，引擎上的爬蟲只針對網頁上的靜態內容來做SEO的分析和評分，而SPA本身的內容都來自於對於使用者互動後的結果，若沒互動請求的話，整體的SPA內容是沒內容的空頁面，這導致在SEO的評分會偏低，進而讓引擎不好找到它，但可以透過一些技術(首次執行SSR，後續使用CSR的技術)或者部分瀏覽器的SEO開始支援SPA來幫助這問題改善。
  - SPA不容易擴充套件：在SPA上，由於效能問題而不建議/不允許擴充太多套件，因為每一個新內容都會塞入同一個頁面，這使得整個專案下內容的初始載入速度會隨著內容數越多而越來越慢，而且還必須額外判斷每個內容的種類不同。
  - SPA不會儲存使用者跳轉頁面時的狀態，也就是說當使用者按下上一頁只會回到上一個頁面，不會回到上一個狀態，而真正能達成上一頁的效果就是回到上一個狀態，必須使用HTML5 History API套件才能解決
  - SPA過於依賴JS：主要畫面和功能都必須要先執行JS才能達成，若遇到客戶端無法執行或者JS過於笨重就會嚴重影響整個應用程式的使用體驗
6. 適用場景：
  - 對於SEO需要較不高的場景
  - 想帶來良好使用者體驗、且不具有擴充性較高的場景，如將網頁平台作為軟體使用的SaaS、社交網站


## 前端框架
1. 前端框架提出背景為 **在SPA中，客戶端會透過JS檔案來從後端獲取對應資訊或者狀態，根據資訊或者狀態的不同來更改客戶端畫面，當時SPA上的所有畫面和功能會是以 指令式渲染來一步一步告知資料一變動的話程式如何渲染結果或者對應UI一變動的話資料如何變動 這方式來實現，而這樣往往會因為SPA使程式碼變得難以維護，甚至會打造成Spaghetti code**

2. 為了解決 **難以維護以及簡化資料和畫面之間的渲染工作**，而將提出Vue.js、React.js等框架來由他們實際實現資料一變動的話程式如何渲染結果或者對應UI一變動的話資料如何變動，並且由開發者使用著它們能看懂的語法來定義所需要的畫面是什麼，換言之，宣告式渲染。
![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1633596645/blog/network/ClientAndServer/MVCModel_framework_abzxcz.png)

## 補充知識：Page 是什麼
1. Page是由伺服器所提供的獨立Web Page，每一個Web Page都是一份hypertext document來表示，而document會有不同的程式碼來進行畫面渲染和功能。

## 補充知識：State 是什麼
1. 狀態是指某物件在特定時間所會有的情況、資訊。
> The particular condition that something is in at a specific time
2. 在網頁開發裡，主要會用狀態來描述三種物件所會有的狀態，分別為:
  - Application State(Program State): 描述著能維持應用程式執行所需的狀態，主要存放在記憶體中
  - Resource State：儲存在伺服器上的資源(如圖片、資料庫記錄)會有的狀態，該會以特定時間點的資源內容來代表該裝態，當資源發生CRUD時，就會改變或者存取其狀態
  - Session State：紀錄客戶端與伺服器之間的過去連線交流狀態(比如客戶端在購物網站遺留的購物車資訊)，其中Session則是伺服器端儲存與客戶端之間的狀態，而Cookie則是客戶端儲存與伺服器之間的交流狀態
3. 參考資料
- [What is State and Why Does it Matter?](https://thedaylightstudio.com/blog/2018/03/14/what-is-state-in-web-application-development)
- [困擾99%前端新手的"狀態管理"究竟是啥意思？](https://kknews.cc/zh-tw/code/95b3o6b.html)
## 補充知識：Spaghetti code
1. 描述程式碼在執行上的控制流程極其複雜、像條意大利麵條一般扭曲糾結。

